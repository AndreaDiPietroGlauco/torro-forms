/*!
 * Torro Forms Version 1.0.0alpha1 (http://torro-forms.com)
 * Licensed under GNU General Public License v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
!function(t,e,n,r){function s(t){this.translations=t,this.selectors={show_entry:".torro-show-entry",hide_entry:".torro-hide-entry",entries:"#torro-entries",entries_table:"#torro-entries-table",entry:"#torro-entry",entries_slider:".torro-entries-slider",entries_slider_start_content:".torro-slider-start-content",entries_slider_right:".torro-slider-right",entries_nav:".torro-entries-nav"}}s.prototype={init:function(){this.init_show_entry(),this.init_hide_entry(),this.init_nav_link(),this.init_results_deletion()},init_show_entry:function(){var t=this;n(this.selectors.entries).on("click",this.selectors.show_entry,function(r){var s=n(this);r.preventDefault(),s.hasClass("button")?(s.addClass("button-loading"),e.ajax.post("torro_show_entry",{nonce:t.translations.nonce_show_entry,form_id:t.get_form_id(),result_id:s.attr("rel")}).done(function(e){n(t.selectors.entries_slider_right).html(e.html),n(t.selectors.entries_slider).animate({marginLeft:"-100%"}),s.removeClass("button-loading"),t.init_hide_entry()}).fail(function(t){console.log(t)})):s.addClass("button")})},init_hide_entry:function(){var t=this;n(this.selectors.entries).on("click",this.selectors.hide_entry,function(e){e.preventDefault(),n(t.selectors.entries_slider).animate({marginLeft:"0"})})},init_nav_link:function(){var t=this;n(this.selectors.entries).on("click",this.selectors.entries_nav,function(r){var s=n(this);s.addClass("button-loading"),r.preventDefault();var i=n(this).attr("href");e.ajax.post("torro_show_entries",{nonce:t.translations.nonce_show_entries,form_id:t.get_form_id(),start:t.get_url_param_value(i,"torro-entries-start"),length:t.get_url_param_value(i,"torro-entries-length")}).done(function(e){s.removeClass("button-loading"),n(t.selectors.entries_slider_start_content).fadeOut(500,function(){n(t.selectors.entries_slider_start_content).html(e.html),n(t.selectors.entries_slider_start_content).fadeIn(500)})}).fail(function(t){console.log(t)})})},init_results_deletion:function(){var t=this;n(document).on("torro.delete_results",function(e,r){n(t.selectors.entries).find(t.selectors.entries_slider_start_content).html(r.html)})},get_form_id:function(){return n("#post_ID").val()},get_url_param_value:function(t,e){var n=t.split("?");n=n[1],n=n.split("&");for(var r=0;r<n.length;r++){var s=n[r].split("=");if(s[0]==e)return s[1]}}},t.add_extension("result_entries",new s(r))}(form_builder,wp,jQuery,translation_entries);