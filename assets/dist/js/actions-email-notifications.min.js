/*!
 * Torro Forms Version 1.0.0alpha1 (http://torro-forms.com)
 * Licensed under GNU General Public License v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
!function(t,i,o,n){"use strict";function e(t){this.translations=t,this.selectors={notifications:"#form-email-notifications .notifications",notifications_counter:"#form-email-notifications .notifications  > div",add_notification_button:"#form-add-email-notification",delete_notification_button:".form-delete-email-notification",delete_notification_dialog:"#delete-email-notification-dialog",nothing_found_sub:".no-entry-found"}}e.prototype={init:function(){this.init_notifications();var t,n=this,e=o(this.selectors.delete_notification_dialog);e.dialog({dialogClass:"wp-dialog",modal:!0,autoOpen:!1,closeOnEscape:!0,minHeight:80,buttons:[{text:this.translations.yes,click:function(){o(".notification-"+t).remove(),o(".notification-"+t+"-content").remove(),n.refresh_nothing_found(),o(this).dialog("close")}},{text:this.translations.no,click:function(){o(this).dialog("close")}}]}),o(document).on("click",this.selectors.add_notification_button,function(t){i.ajax.post("torro_get_email_notification_html",{nonce:n.translations.nonce_get_email_notification_html}).done(function(t){o(n.selectors.notifications).prepend(t.html),n.init_notifications(),o(".notification-"+t.id).hide().fadeIn(2500)}).fail(function(t){console.log(t)})}),o(document).on("click",this.selectors.delete_notification_button,function(i){t=o(this).attr("data-emailnotificationid"),i.preventDefault(),e.dialog("open")})},init_notifications:function(){var i=o(this.selectors.notifications);i.hasClass("ui-accordion")&&i.accordion("destroy"),this.refresh_nothing_found(),i.accordion({collapsible:!0,active:!1,header:"h4",heightStyle:"content"});var n=t.get_extension("templatetags");n?n.init_templatetag_buttons():console.error("Templatetags extension not exists!")},refresh_nothing_found:function(){0===o(this.selectors.notifications_counter).length?o(this.selectors.notifications).find(this.selectors.nothing_found_sub).show():o(this.selectors.notifications).find(this.selectors.nothing_found_sub).hide()}},t.add_extension("action_email_notifications",new e(n))}(form_builder,wp,jQuery,translation_email_notifications);