/*!
 * Torro Forms Version 1.0.0-beta.9 (https://torro-forms.com)
 * Licensed under GNU General Public License v2 (or later) (http://www.gnu.org/licenses/gpl-2.0.html)
 */
!function(e,l,t,a){"use strict";function i(e,l){var t=a.templateTagSlug.replace("%element_id%",e.get("id")),i=a.templateTagGroup,n=l.find(".template-tag-"+t);n&&(n.remove(),l.find(".template-tag-list-group-"+i+" > ul > li").length||l.find(".template-tag-list-group-"+i).remove())}function n(e,l){var i={slug:a.templateTagSlug.replace("%element_id%",e.get("id")),group:a.templateTagGroup,label:a.templateTagLabel.replace("%element_label%",e.get("label")),description:a.templateTagDescription.replace("%element_label%",e.get("label"))},n={slug:a.templateTagGroup,label:a.templateTagGroupLabel},p=t(a.templateTagTemplate.replace(/%slug%/g,i.slug).replace(/%group%/g,i.group).replace(/%label%/g,i.label).replace(/%description%/g,i.description)),r=l.find(".template-tag-list-group-"+i.group+" > ul");r.length||(r=t(a.templateTagGroupTemplate.replace(/%slug%/g,n.slug).replace(/%label%/g,n.label)),l.append(r),r=r.children("ul")),r.append(p),e.on("change:label",function(e,l){var t=a.templateTagLabel.replace("%element_label%",l);p.html(p.html().replace(i.label,t)),i.label=t})}var p=e.Builder.getInstance();p.on("addElement",function(e){t(".plugin-lib-repeatable-group-email_notifications__notifications-wrap .template-tag-list").each(function(){var l,a=t(this),p=a.parents(".template-tag-list-wrap").prev('input[type="email"]');p.length?(l=e.element_settings.findWhere({name:"input_type"}),l&&("email_address"===l.get("value")&&n(e,a),l.on("change:value",function(l,t){"email_address"===t?n(e,a):i(e,a)}))):n(e,a)})}),p.on("removeElement",function(e){t(".plugin-lib-repeatable-group-email_notifications__notifications-wrap .template-tag-list").each(function(){var l=t(this);i(e,l)})})}(window.torro,window.pluginLibFieldsAPI,window.jQuery,window.torroEmailNotifications);