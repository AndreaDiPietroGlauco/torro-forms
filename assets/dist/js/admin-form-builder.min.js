/*!
 * Torro Forms Version 1.0.0-beta.8 (http://torro-forms.com)
 * Licensed under GNU General Public License v3 (http://www.gnu.org/licenses/gpl-3.0.html)
 */
window.torro=window.torro||{},function(t,e,i,n,o,s){"use strict";function r(t){u++,c["builder"+u]=[],this.instanceNumber=u,this.$el=e(t),this.elementTypes,this.form,this.containers,this.elements,this.elementChoices,this.elementSettings}var d,u=0,l=[],c={};i.extend(r.prototype,{init:function(){return this.$el.length?void t.api.init().done(i.bind(function(){new t.api.models.Form({id:parseInt(e("#post_ID").val(),10)}).fetch({data:{context:"edit",_embed:!0},context:this,success:function(n){(new t.api.collections.ElementTypes).fetch({data:{context:"edit"},context:this,success:function(o){e(document).ready(i.bind(function(){var e;l.push(this.instanceCount),this.elementTypes=t.Builder.ElementTypes.fromApiCollection(o),this.addHooks(),this.setupInitialData(n);for(e in c["builder"+this.instanceCount])c["builder"+this.instanceCount][e](this);delete c["builder"+this.instanceCount]},this))},error:function(){e(document).ready(i.bind(function(){this.fail(s.couldNotLoadData)},this))}})},error:function(){e(document).ready(i.bind(function(){this.fail(s.couldNotLoadData)},this))}})},this)).fail(i.bind(function(){e(document).ready(i.bind(function(){this.fail(s.couldNotLoadData)},this))},this)):void console.error(s.couldNotInitCanvas)},addHooks:function(){!i.contains(l,this.instanceCount)},setupInitialData:function(t){!i.contains(l,this.instanceCount)},onLoad:function(t){return i.isUndefined(c["builder"+this.instanceCount])?void t(this):void c["builder"+this.instanceCount].push(t)},fail:function(e){var i=t.template("failure");this.$el.find(".drag-drop-area").addClass("is-empty").html(i({message:e}))}}),t.Builder=r,t.Builder.getInstance=function(){return d||(d=new r("#torro-form-canvas"),d.init()),d}}(window.torro,window.jQuery,window._,window.Backbone,window.wp,window.torroBuilderI18n),function(t,e,i,n){"use strict";t.BaseModel=n.Model.extend({links:{},constructor:function(t,o){var s=t||{},r=this.idAttribute||n.Model.prototype.idAttribute||"id";s._links&&(this.links=s._links),s=i.omit(s,["_links","_embedded"]),s[r]||(s[r]=e.generateTempId()),n.Model.constructor.apply(this,[s,o])},sync:function(t,e,n){return"create"===t&&e.has(e.idAttribute)&&(n.attrs||(n.attrs=e.toJSON(n)),n.attrs=i.omit(n.attrs,e.idAttribute)),!1},isNew:function(){return!this.has(this.idAttribute)||e.isTempId(this.get(this.idAttribute))}})}(window.torro.Builder,window.torro,window._,window.Backbone),function(t,e,i,n){"use strict";t.BaseCollection=n.Collection.extend({model:t.BaseModel,initialize:function(){this.urlEndpoint&&(this.url=e.api.root+e.api.versionString+this.urlEndpoint)},sync:function(){return!1}})}(window.torro.Builder,window.torro,window._,window.Backbone),function(t,e){"use strict";function i(t){this.attributes=t}e.extend(i.prototype,{getSlug:function(){return this.attributes.slug},getTitle:function(){return this.attributes.title},getDescription:function(){return this.attributes.description},getIconUrl:function(){return this.attributes.icon_url},isEvaluable:function(){return this.attributes.evaluable},isMultiField:function(){return this.attributes.multifield},getSections:function(){return this.attributes.sections},getFields:function(){return this.attributes.fields}}),t.ElementType=i}(window.torro.Builder,window._),function(t,e){"use strict";function i(t){var e;this.types={};for(e in t)this.types[t[e].getSlug()]=t[e]}e.extend(i.prototype,{get:function(t){if(!e.isUndefined(this.types[t]))return this.types[t]},getAll:function(){return this.types}}),i.fromApiCollection=function(n){var o=[];return n.each(function(i){var n=e.extend({},i.attributes);n._links&&delete n._links,n._embedded&&delete n._embedded,o.push(new t.ElementType(n))}),new i(o)},t.ElementTypes=i}(window.torro.Builder,window._),function(t){"use strict";t.ContainerModel=t.BaseModel.extend({defaults:{id:0,form_id:0,label:"",sort:0}})}(window.torro.Builder),function(t){"use strict";t.ElementChoiceModel=t.BaseModel.extend({defaults:{id:0,element_id:0,field:"",value:"",sort:0}})}(window.torro.Builder),function(t){"use strict";t.ElementModel=t.BaseModel.extend({defaults:{id:0,container_id:0,label:"",sort:0,type:"textfield"}})}(window.torro.Builder),function(t){"use strict";t.ElementSettingModel=t.BaseModel.extend({defaults:{id:0,element_id:0,name:"",value:""}})}(window.torro.Builder),function(t){"use strict";t.FormModel=t.BaseModel.extend({defaults:{id:0,title:"",slug:"",author:0,status:"draft",timestamp:0,timestamp_modified:0}})}(window.torro.Builder),function(t){"use strict";t.ContainerCollection=t.BaseCollection.extend({model:t.ContainerModel})}(window.torro.Builder),function(t){"use strict";t.ElementChoiceCollection=t.BaseCollection.extend({model:t.ElementChoiceModel})}(window.torro.Builder),function(t){"use strict";t.ElementCollection=t.BaseCollection.extend({model:t.ElementModel})}(window.torro.Builder),function(t){"use strict";t.ElementSettingCollection=t.BaseCollection.extend({model:t.ElementSettingModel})}(window.torro.Builder),function(t){"use strict";t.FormCollection=t.BaseCollection.extend({model:t.FormModel})}(window.torro.Builder),function(t){"use strict";t.getInstance()}(window.torro.Builder);